<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Notes de lecture: Compositional Certified Resource Bounds</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Notes de lecture: Compositional Certified Resource Bounds</h1>
<div id="table-of-contents">
<h2>Table des matières</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org14f4a70">Introduction</a>
<ul>
<li><a href="#orga38599a">Motivation</a></li>
<li><a href="#org2035fd9">Analyses &laquo;&nbsp;impératives&nbsp;&raquo;</a></li>
<li><a href="#orga49ee73">Analyses &laquo;&nbsp;fonctionnelles&nbsp;&raquo;</a></li>
<li><a href="#org6b98179">Contribution</a></li>
</ul>
</li>
<li><a href="#orge11fb06">Méthode du potentiel</a>
<ul>
<li><a href="#org926245d">Définitions</a></li>
<li><a href="#org27ad630">Premiers exemples</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Cet article introduit l&rsquo;analyse/C<sup>4</sup>B/ pour la dérivation de bornes aux-pire-cas
de consommation de ressource des programmes <i>C</i>. Par rapport à l&rsquo;état de l&rsquo;art
de l&rsquo;époque (2015), elle est <i>composable</i>, <i>interactive</i>, <i>certifiante</i>, et
<i>efficace à l&rsquo;échelle</i>. Les travaux présentés ici serviront de base pour la
thèse de Carbonneaux.
</p>

<div id="outline-container-org14f4a70" class="outline-2">
<h2 id="org14f4a70">Introduction</h2>
<div class="outline-text-2" id="text-org14f4a70">
</div>
<div id="outline-container-orga38599a" class="outline-3">
<h3 id="orga38599a">Motivation</h3>
<div class="outline-text-3" id="text-orga38599a">
<p>
<i>Voir l&rsquo;abstract de <a href="carbonneaux2018.html">carbonneaux2018.html</a></i>.
</p>

<p>
Au delà des avantages familiers de l&rsquo;analyse de ressource les programmes
exécutés sur des plate-formes non-fiables doivent pouvoir bénéficier de
garanties statistiques sur leur réussite. Si l&rsquo;opération matérielle <i>P</i> échoue
avec probabilité <i>p</i>, une boucle contenant <i>P</i> a une change d&rsquo;échec d&rsquo;au moins
<i>p<sup>k</sup></i>, avec <i>k</i> une borne du nombre de tours. Obtenir des informations statiques
fines sur l&rsquo;exécution du programme affine donc les informations sur la confiance
à accorder aux systèmes non-fiables.
</p>

<p>
Enfin, l&rsquo;interaction avec l&rsquo;utilisateur est un espace des possibles: Les
analyses de ressources considérées sont consistantes, donc incomplètes. Il est
alors pertinent de permettre à un être humain de donner les dernières
informations permettant à l&rsquo;analyse de conclure. Notons bien: si l&rsquo;interaction
veut être compatible avec la génération de certificats, il faut automatiquement
garantir que les &laquo;&nbsp;indices&nbsp;&raquo; fournis par l&rsquo;humain soient en suite re-dérivables
par le système d&rsquo;analyse: l&rsquo;humain donne des coupures, pas des axiomes.
</p>
</div>
</div>

<div id="outline-container-org2035fd9" class="outline-3">
<h3 id="org2035fd9">Analyses &laquo;&nbsp;impératives&nbsp;&raquo;</h3>
<div class="outline-text-3" id="text-org2035fd9">
<p>
Les outils d&rsquo;analyse statique de ressources forment deux grandes familles, que
l&rsquo;on nommera <i>impératives</i> et <i>fonctionnelles</i>, par abus. Les analyses
<i>impératives</i> permettent d&rsquo;obtenir des bornes très fines sur des programmes
impératifs structurés entiers, mais elles composent relativement mal. Il est
délicat d&rsquo;abstraire une procédure à ces appelants, ou encore d&rsquo;analyser une
séquence de boucles sans avoir à calculer les pre-<i>post- conditions
arithmétiques entre elles. Et c&rsquo;est /beaucoup</i> plus facile à dire qu&rsquo;à faire.
</p>

<p>
Les travaux de cette branche de l&rsquo;analyse statique automatique de ressource ont
produits des outils comme <i>SPEED</i>, <i>PUBS</i>, <i>LOOPUS</i>, <i>Rank</i> et <i>KoAT</i> (voir
<a href="carbonneaux2018.html">carbonneaux2018.html</a>). Elles sont basées sur les <i>fonctions de classement</i>
et les <i>registres virtuels</i>, qui sont une source majeurs de non-composition.
L&rsquo;inlining est donc de mise, et avec lui la redondance, et donc l&rsquo;absence de
passage à l&rsquo;échelle.
</p>
</div>
</div>

<div id="outline-container-orga49ee73" class="outline-3">
<h3 id="orga49ee73">Analyses &laquo;&nbsp;fonctionnelles&nbsp;&raquo;</h3>
<div class="outline-text-3" id="text-orga49ee73">
<p>
La seconde forme d&rsquo;analyse est basée sur l&rsquo;analyse amortie (méthode du
potentiel) et les systèmes de types. Les invariants de classes en OOP, et ceux
des structures de données dans la logique de séparation peuvent être vues comme
des types dans des systèmes pertinent pour l&rsquo;analyse de ressource.
</p>

<p>
Les analyses <i>fonctionnelles</i> sont elles hautement composables, et peuvent
fonctionner directement sur la syntaxe: on parle d&rsquo;analyse dirigée par les
types. Mais elles reposent sur l&rsquo;obtention de décroissance sur un ordre
bien-fondé, qui peut souvent leurs échapper. Par exemple, dans l&rsquo;itération
<code>for(i:=n; i++; i&lt;m)</code>, la décroissance est sur l&rsquo;expression linéaire <code>m-i</code>. Les
designs patterns impératifs courants comme le flux de contrôle non-linéaire ou
la mutation ont formé jusqu&rsquo;à peut des obstacles insurmontables aux analyses
<i>fonctionnelles</i>.
</p>
</div>
</div>

<div id="outline-container-org6b98179" class="outline-3">
<h3 id="org6b98179">Contribution</h3>
<div class="outline-text-3" id="text-org6b98179">
<p>
C<sup>4</sup>B est la première analyse <i>semi-automatique</i> de ressource. Nous avons
adapté les méthodes à potentiels pour inférer l&rsquo;usage de ressource de programmes
C comprenant, entre autres, les structures suivantes:
</p>
<ul class="org-ul">
<li>les fonctions mutuellement récursives;</li>
<li>les boucles en séquence;</li>
<li>les boucles imbriqués partageant des indices;</li>
<li>la libération mémoire dynamique.</li>
</ul>
<p>
Notre système est basé sur une logique à la Hoare portant sur des combinaisons
de variables. Il est le premier à gérer les bornes dépendants de variables
<code>signed</code> et de différences entre variables. Il permet la composition d&rsquo;analyse,
notamment en générant des abstractions de ressources pour les fonctions, et
produit des certificats pour les bornes inférées vérifiables en temps linéaire.
</p>

<p>
Les bornes sont produites en réduisant les relations linéaire et amorties
non-linéaires entre les variables à un problème de programmation linéaire
classique, une nouveauté. Notre analyse a été prouvée cohérence par rapport à
une sémantique paramétrique de coût de C, qui peut être modifiée à posteriori
(fonction <code>tick(n)</code>).
</p>

<p>
Nos avons testé C<sup>4</sup>B sur plus de 2900 lignes de code C et l&rsquo;avons comparé dans
un cadre expérimental avec d&rsquo;autre analyseurs de ressource existants. Le
benchmark <i>cBench</i> à servi de banc de test, augmenté de plusieurs extraits de
projets open source et libres ayant démontrés leurs résistance à l&rsquo;analyse
statique. Il en ressort, avec les précautions d&rsquo;usage, que C<sup>4</sup>B est le seul
capable de d&rsquo;inférer à la fois des bornes globales sur des programmes de grandes
tailles et des bornes locales sur des flots de contrôles complexes.
</p>
</div>
</div>
</div>
<div id="outline-container-orge11fb06" class="outline-2">
<h2 id="orge11fb06">Méthode du potentiel</h2>
<div class="outline-text-2" id="text-orge11fb06">
</div>
<div id="outline-container-org926245d" class="outline-3">
<h3 id="org926245d">Définitions</h3>
<div class="outline-text-3" id="text-org926245d">
<p>
On commence avec une <i>sémantique opérationnelle</i> à grands pas d&rsquo;un langage
impératif idéal: un programme <b>S</b> munit d&rsquo;un état initial <b>σ</b>, s&rsquo;exécute avec un
coût <b>n</b> et produit un état final <b>σ&rsquo;</b> et on note cela <b>(S,σ) ⇓n σ&rsquo;</b>. La méthode
du potentiel consiste à définir une fonction <b>Φ</b> des états vers <b>ℚ<sup>+</sup></b> et de
prouver la
</p>

<blockquote>
<p>
<i>Propriété des potentiels</i>: <br />
Si <b>Φ(σ) ≥ n</b>, alors <b>(S, σ)  n σ&rsquo;</b> pour un certain <b>σ&rsquo;</b>.
</p>
</blockquote>

<p>
<b>Φ(σ)</b> est alors une borne statique acceptable de la consommation de
ressource. On peut ensuite définir des triplés à la Hoare pour les fonctions de
potentiels:
</p>

<blockquote>
<p>
<b>{Φ} S {Φ&rsquo;}</b> si et seulement si, pour tout <b>σ</b>, <b>σ&rsquo;</b>, <b>n</b>: <br />
<b>(S, σ) ⇓n σ&rsquo;</b> implique <b>Φ(σ) ≥ n + Φ&rsquo;(σ&rsquo;)</b>
</p>
</blockquote>


<p>
On retrouve alors une règle classique de la logique de Hoare, mais <b>Φ&rsquo;</b> n&rsquo;est
définie qu&rsquo;avec l&rsquo;aide de <b>S</b>, un avantage clair.
</p>
<blockquote>
<p>
<b>{Φ} S {Φ&rsquo;}</b> &emsp; &emsp; &emsp; <b>{Φ&rsquo;} S&rsquo; {Φ&rsquo;&rsquo;}</b> <br />
<b>------------------------------------</b> <br />
&emsp; &emsp; &emsp; &emsp; <b>{Φ} S;S&rsquo; {Φ&rsquo;&rsquo;}</b>
</p>
</blockquote>
</div>
</div>


<div id="outline-container-org27ad630" class="outline-3">
<h3 id="org27ad630">Premiers exemples</h3>
</div>
</div>
</div>
</body>
</html>
