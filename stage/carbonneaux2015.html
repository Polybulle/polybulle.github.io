<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Notes de lecture: Compositional Certified Resource Bounds</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="/Users/polybulle/Site/css/stylesheet.css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Notes de lecture: Compositional Certified Resource Bounds</h1>
<div id="table-of-contents">
<h2>Table des mati√®res</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org14f4a70">Introduction</a>
<ul>
<li><a href="#orga38599a">Motivation</a></li>
<li><a href="#org2035fd9">Analyses &laquo;&nbsp;imp√©ratives&nbsp;&raquo;</a></li>
<li><a href="#orga49ee73">Analyses &laquo;&nbsp;fonctionnelles&nbsp;&raquo;</a></li>
<li><a href="#org6b98179">Contribution</a></li>
</ul>
</li>
<li><a href="#orge11fb06">M√©thode du potentiel</a>
<ul>
<li><a href="#org6ba9878">Analyse quantitative</a></li>
<li><a href="#org2a0df54">Abstraction du programme</a></li>
<li><a href="#org4ecbb51">Exemples juteux</a></li>
<li><a href="#org02c13e6">Potentiels lin√©aires</a></li>
</ul>
</li>
<li><a href="#orgc56621b">Syst√®me de type</a>
<ul>
<li><a href="#org8acbaec">Jugements de typage</a></li>
<li><a href="#orgf1b5e73"><span class="todo TODO">TODO</span> Syst√®me de type</a></li>
</ul>
</li>
<li><a href="#orgc3e0541"><span class="todo TODO">TODO</span> Inf√©rence automatis√©e par programmation lin√©aire</a></li>
<li><a href="#org23d647e"><span class="todo TODO">TODO</span> Contexte logique et interaction utilisateur</a></li>
<li><a href="#orgf304d59"><span class="todo TODO">TODO</span> Relation √† l&rsquo;√©tat de l&rsquo;art</a></li>
</ul>
</div>
</div>
<p>
Cet article introduit l&rsquo;analyse/C<sup>4</sup>B/ pour la d√©rivation de bornes aux-pire-cas
de consommation de ressource des programmes <i>C</i>. Par rapport √† l&rsquo;√©tat de l&rsquo;art
de l&rsquo;√©poque (2015), elle est <i>composable</i>, <i>interactive</i>, <i>certifiante</i>, et
<i>efficace √† l&rsquo;√©chelle</i>. Les travaux pr√©sent√©s ici serviront de base pour la
th√®se de Carbonneaux.
</p>

<div id="outline-container-org14f4a70" class="outline-2">
<h2 id="org14f4a70">Introduction</h2>
<div class="outline-text-2" id="text-org14f4a70">
</div>
<div id="outline-container-orga38599a" class="outline-3">
<h3 id="orga38599a">Motivation</h3>
<div class="outline-text-3" id="text-orga38599a">
<p>
<i>Voir l&rsquo;abstract de <a href="carbonneaux2018.html">carbonneaux2018.html</a></i>.
</p>

<p>
Au del√† des avantages familiers de l&rsquo;analyse de ressource les programmes
ex√©cut√©s sur des plate-formes non-fiables doivent pouvoir b√©n√©ficier de
garanties statistiques sur leur r√©ussite. Si l&rsquo;op√©ration mat√©rielle <i>P</i> √©choue
avec probabilit√© <i>p</i>, une boucle contenant <i>P</i> a une change d&rsquo;√©chec d&rsquo;au moins
<i>p<sup>k</sup></i>, avec <i>k</i> une borne du nombre de tours. Obtenir des informations statiques
fines sur l&rsquo;ex√©cution du programme affine donc les informations sur la confiance
√† accorder aux syst√®mes non-fiables.
</p>

<p>
Enfin, l&rsquo;interaction avec l&rsquo;utilisateur est un espace des possibles: Les
analyses de ressources consid√©r√©es sont consistantes, donc incompl√®tes. Il est
alors pertinent de permettre √† un √™tre humain de donner les derni√®res
informations permettant √† l&rsquo;analyse de conclure. Notons bien: si l&rsquo;interaction
veut √™tre compatible avec la g√©n√©ration de certificats, il faut automatiquement
garantir que les &laquo;&nbsp;indices&nbsp;&raquo; fournis par l&rsquo;humain soient en suite re-d√©rivables
par le syst√®me d&rsquo;analyse: l&rsquo;humain donne des coupures, pas des axiomes.
</p>
</div>
</div>

<div id="outline-container-org2035fd9" class="outline-3">
<h3 id="org2035fd9">Analyses &laquo;&nbsp;imp√©ratives&nbsp;&raquo;</h3>
<div class="outline-text-3" id="text-org2035fd9">
<p>
Les outils d&rsquo;analyse statique de ressources forment deux grandes familles, que
l&rsquo;on nommera <i>imp√©ratives</i> et <i>fonctionnelles</i>, par abus. Les analyses
<i>imp√©ratives</i> permettent d&rsquo;obtenir des bornes tr√®s fines sur des programmes
imp√©ratifs structur√©s entiers, mais elles composent relativement mal. Il est
d√©licat d&rsquo;abstraire une proc√©dure √† ces appelants, ou encore d&rsquo;analyser une
s√©quence de boucles sans avoir √† calculer les pre-<i>post- conditions
arithm√©tiques entre elles. Et c&rsquo;est /beaucoup</i> plus facile √† dire qu&rsquo;√† faire.
</p>

<p>
Les travaux de cette branche de l&rsquo;analyse statique automatique de ressource ont
produits des outils comme <i>SPEED</i>, <i>PUBS</i>, <i>LOOPUS</i>, <i>Rank</i> et <i>KoAT</i> (voir
<a href="carbonneaux2018.html">carbonneaux2018.html</a>). Elles sont bas√©es sur les <i>fonctions de classement</i>
et les <i>registres virtuels</i>, qui sont une source majeurs de non-composition.
L&rsquo;inlining est donc de mise, et avec lui la redondance, et donc l&rsquo;absence de
passage √† l&rsquo;√©chelle.
</p>
</div>
</div>

<div id="outline-container-orga49ee73" class="outline-3">
<h3 id="orga49ee73">Analyses &laquo;&nbsp;fonctionnelles&nbsp;&raquo;</h3>
<div class="outline-text-3" id="text-orga49ee73">
<p>
La seconde forme d&rsquo;analyse est bas√©e sur l&rsquo;analyse amortie (m√©thode du
potentiel) et les syst√®mes de types. Les invariants de classes en OOP, et ceux
des structures de donn√©es dans la logique de s√©paration peuvent √™tre vues comme
des types dans des syst√®mes pertinent pour l&rsquo;analyse de ressource.
</p>

<p>
Les analyses <i>fonctionnelles</i> sont elles hautement composables, et peuvent
fonctionner directement sur la syntaxe: on parle d&rsquo;analyse dirig√©e par les
types. Mais elles reposent sur l&rsquo;obtention de d√©croissance sur un ordre
bien-fond√©, qui peut souvent leurs √©chapper. Par exemple, dans l&rsquo;it√©ration
<code>for(i:=n; i++; i&lt;m)</code>, la d√©croissance est sur l&rsquo;expression lin√©aire <code>m-i</code>. Les
designs patterns imp√©ratifs courants comme le flux de contr√¥le non-lin√©aire ou
la mutation ont form√© jusqu&rsquo;√† peut des obstacles insurmontables aux analyses
<i>fonctionnelles</i>.
</p>
</div>
</div>

<div id="outline-container-org6b98179" class="outline-3">
<h3 id="org6b98179">Contribution</h3>
<div class="outline-text-3" id="text-org6b98179">
<p>
C<sup>4</sup>B est la premi√®re analyse <i>semi-automatique</i> de ressource. Nous avons
adapt√© les m√©thodes √† potentiels pour inf√©rer l&rsquo;usage de ressource de programmes
C comprenant, entre autres, les structures suivantes:
</p>
<ul class="org-ul">
<li>les fonctions mutuellement r√©cursives;</li>
<li>les boucles en s√©quence;</li>
<li>les boucles imbriqu√©s partageant des indices;</li>
<li>la lib√©ration m√©moire dynamique.</li>
</ul>
<p>
Techniquement, l&rsquo;analyse porte sur <i>Clight</i>, la premi√®re repr√©sentation
interm√©diaire de <i>CompCert</i>. C&rsquo;est un sous-C avec une seule structure de boucle,
et sans effets de bords dans les expressions.
</p>

<p>
Notre syst√®me est bas√© sur une logique √† la Hoare portant sur des combinaisons
de variables. Il est le premier √† g√©rer les bornes d√©pendants de variables
<code>signed</code> et de diff√©rences entre variables. Il permet la composition d&rsquo;analyse,
notamment en g√©n√©rant des abstractions de ressources pour les fonctions, et
produit des certificats pour les bornes inf√©r√©es v√©rifiables en temps lin√©aire.
</p>

<p>
Les bornes sont produites en r√©duisant les relations lin√©aire et amorties
non-lin√©aires entre les variables √† un probl√®me de programmation lin√©aire
classique, une nouveaut√©. Notre analyse a √©t√© prouv√©e coh√©rence par rapport √†
une s√©mantique param√©trique de co√ªt de C, qui peut √™tre modifi√©e √† posteriori
(fonction <code>tick(n)</code>).
</p>

<p>
Nos avons test√© C<sup>4</sup>B sur plus de 2900 lignes de code C et l&rsquo;avons compar√© dans
un cadre exp√©rimental avec d&rsquo;autre analyseurs de ressource existants. Le
benchmark <i>cBench</i> √† servi de banc de test, augment√© de plusieurs extraits de
projets open source et libres ayant d√©montr√©s leurs r√©sistance √† l&rsquo;analyse
statique. Il en ressort, avec les pr√©cautions d&rsquo;usage, que C<sup>4</sup>B est le seul
capable de d&rsquo;inf√©rer √† la fois des bornes globales sur des programmes de grandes
tailles et des bornes locales sur des flots de contr√¥les complexes.
</p>
</div>
</div>
</div>

<div id="outline-container-orge11fb06" class="outline-2">
<h2 id="orge11fb06">M√©thode du potentiel</h2>
<div class="outline-text-2" id="text-orge11fb06">
</div>
<div id="outline-container-org6ba9878" class="outline-3">
<h3 id="org6ba9878">Analyse quantitative</h3>
<div class="outline-text-3" id="text-org6ba9878">
<p>
On commence avec une <i>s√©mantique op√©rationnelle</i> √† grands pas d&rsquo;un langage
imp√©ratif id√©al: un programme <b>S</b> munit d&rsquo;un ensemble d&rsquo;√©tat initial <b>ùïä</b> et d&rsquo;un
√©tat initial <b>œÉ</b>, s&rsquo;ex√©cute avec un co√ªt <b>n</b> et produit un √©tat final <b>œÉ&rsquo;</b> et on
note cela <b>(S,œÉ) ‚áìn œÉ&rsquo;</b>. La m√©thode du potentiel consiste √† d√©finir une fonction
<b>Œ¶</b> des √©tats vers <b>‚Ñö<sup>+</sup></b> et de prouver la
</p>


<blockquote>
<p>
<i>Propri√©t√© des potentiels</i>: <br />
Si <b>Œ¶(œÉ) ‚â• n</b>, alors <b>(S, œÉ)  n œÉ&rsquo;</b> pour un certain <b>œÉ&rsquo;</b>.
</p>
</blockquote>

<p>
<b>Œ¶(œÉ)</b> est alors une borne statique acceptable de la consommation de
ressource. On peut ensuite d√©finir des tripl√©s √† la Hoare pour les fonctions de
potentiels:
</p>

<blockquote>
<p>
<b>{Œ¶} S {Œ¶&rsquo;}</b> si et seulement si, pour tout <b>œÉ</b>, <b>œÉ&rsquo;</b>, <b>n</b>: <br />
<b>(S, œÉ) ‚áìn œÉ&rsquo;</b> implique <b>Œ¶(œÉ) ‚â• n + Œ¶&rsquo;(œÉ&rsquo;)</b>
</p>
</blockquote>


<p>
On retrouve alors une r√®gle classique de la logique de Hoare, mais <b>Œ¶&rsquo;</b> n&rsquo;est
d√©finie qu&rsquo;avec l&rsquo;aide de <b>S</b>, un avantage clair.
</p>
<blockquote>
<p>
<b>{Œ¶} S {Œ¶&rsquo;}</b> &emsp; &emsp; &emsp; <b>{Œ¶&rsquo;} S&rsquo; {Œ¶&rsquo;&rsquo;}</b> <br />
<b>------------------------------------</b> <br />
&emsp; &emsp; &emsp; &emsp; <b>{Œ¶} S;S&rsquo; {Œ¶&rsquo;&rsquo;}</b>
</p>
</blockquote>


<p>
Enfin, pour s&rsquo;√©viter une lourdeur syntaxique, nous notons <b>‚Äπx,y‚Ä∫</b> la valeur
<b>max(y-x,0)</b> (que le papier note <b>|[x,y]|</b>, la norme positive de l&rsquo;intervalle
<b>[x,y]</b>).
</p>
</div>
</div>

<div id="outline-container-org2a0df54" class="outline-3">
<h3 id="org2a0df54">Abstraction du programme</h3>
<div class="outline-text-3" id="text-org2a0df54">
<p>
Les analyses quantitatives ne suffisent pas √† raisonner sur les programmes. Il
faut maintenir <i>√† minima</i> un √©tat abstrait justifiant les op√©rations sur les
fonctions de potentiels. Notre outil repr√©sente cette √©tat comme un contexte
logique, extrait d&rsquo;une interpr√©tation abstraite. Le domaine de choix est celui
des poly√®dres, avec acc√©l√©ration importante des points fixes: des invariants
locaux faibles sont empiriquement suffisant.
</p>
</div>
</div>

<div id="outline-container-org4ecbb51" class="outline-3">
<h3 id="org4ecbb51">Exemples juteux</h3>
<div class="outline-text-3" id="text-org4ecbb51">
<p>
Je conseille d&rsquo;essayer de trouver, √† la main, le co√ªt de ces fragments de code
avant de lire la r√©ponse exacte, inf√©r√©e correctement par C<sup>4</sup>B. On passe les
exemples sur les fonctions mutuellement r√©cursives et les it√©rations tordues.
</p>
</div>

<div id="outline-container-org0c71311" class="outline-4">
<h4 id="org0c71311">Quelques it√©rations classiques:</h4>
<div class="outline-text-4" id="text-org0c71311">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #b1b1b1;">/* </span><span style="color: #b1b1b1;">(1)</span><span style="color: #b1b1b1;"> */</span> <span style="color: #3b6ea8;">while</span><span style="color: #3b6ea8;">(</span>x &lt; y<span style="color: #3b6ea8;">)</span> <span style="color: #3b6ea8;">{</span>x++; tick<span style="color: #97365b;">(</span><span style="color: #97365b; font-weight: bold;">1</span><span style="color: #97365b;">)</span><span style="color: #3b6ea8;">}</span>
<span style="color: #b1b1b1;">/* </span><span style="color: #b1b1b1;">(2)</span><span style="color: #b1b1b1;"> */</span> <span style="color: #3b6ea8;">while</span><span style="color: #3b6ea8;">(</span>x+K &lt;= y<span style="color: #3b6ea8;">)</span> <span style="color: #3b6ea8;">{</span>x += K; tick<span style="color: #97365b;">(</span>T<span style="color: #97365b;">)</span><span style="color: #3b6ea8;">}</span>     <span style="color: #b1b1b1;">// </span><span style="color: #b1b1b1;">K et T sont des constantes</span>
<span style="color: #b1b1b1;">/* </span><span style="color: #b1b1b1;">(3)</span><span style="color: #b1b1b1;"> */</span> <span style="color: #3b6ea8;">while</span><span style="color: #3b6ea8;">(</span>x &lt; y<span style="color: #3b6ea8;">)</span> <span style="color: #3b6ea8;">{</span>tick<span style="color: #97365b;">(</span>-<span style="color: #97365b; font-weight: bold;">1</span><span style="color: #97365b;">)</span>; x++; tick<span style="color: #97365b;">(</span><span style="color: #97365b; font-weight: bold;">1</span><span style="color: #97365b;">)</span><span style="color: #3b6ea8;">}</span>
</pre>
</div>

<p>
Parmi les outils test√©s, tous bornent correctement le co√ªt <b>‚Äπx,y‚Ä∫</b> pour <i>(1)</i>,
mais seul C<sup>4</sup>B inf√®re la borne exacte <b>(T/K)‚Äπx,y‚Ä∫</b> pour <i>(2)</i>, qu&rsquo;il traite de
mani√®re totalement identique. Ce n&rsquo;est pas le cas pour les autres. L&rsquo;exemple
<i>(3)</i> est de co√ªt nul, ce qu&rsquo;une m√©thode bas√© sur les m√©thodes de classements ne
peux √©tablir. Nos fonctions de potentiels elles inf√®rent bien que le co√ªt du
programme est 0.
</p>
</div>
</div>

<div id="outline-container-org70951b4" class="outline-4">
<h4 id="org70951b4">It√©rations imbriqu√©es interd√©pendantes</h4>
<div class="outline-text-4" id="text-org70951b4">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #3b6ea8;">while</span> <span style="color: #3b6ea8;">(</span>n&lt;<span style="color: #97365b; font-weight: bold;">0</span><span style="color: #3b6ea8;">)</span> <span style="color: #3b6ea8;">{</span>
    n++;
    y = y+<span style="color: #97365b; font-weight: bold;">1000</span>;
    <span style="color: #3b6ea8;">while</span><span style="color: #97365b;">(</span>y&gt;=<span style="color: #97365b; font-weight: bold;">100</span> &amp;&amp; rand_bool<span style="color: #4f894c;">()</span><span style="color: #97365b;">)</span> <span style="color: #97365b;">{</span>
        y = y-<span style="color: #97365b; font-weight: bold;">100</span>;
        tick<span style="color: #4f894c;">(</span><span style="color: #97365b; font-weight: bold;">5</span><span style="color: #4f894c;">)</span>;
    <span style="color: #97365b;">}</span>
    tick<span style="color: #97365b;">(</span><span style="color: #97365b; font-weight: bold;">9</span><span style="color: #97365b;">)</span>
<span style="color: #3b6ea8;">}</span>
</pre>
</div>
<p>
La borne correcte est <b>59‚Äπn,0‚Ä∫ + 0.05‚Äπ0,y‚Ä∫</b>. En effet, la valeur initiale de <code>y</code>
n&rsquo;influe que sur la premi√®re √©valuation de la boucle.
</p>
</div>
</div>

<div id="outline-container-org059ade0" class="outline-4">
<h4 id="org059ade0">Traitement par bloc</h4>
<div class="outline-text-4" id="text-org059ade0">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #3b6ea8;">for</span><span style="color: #3b6ea8;">(</span> ; l&gt;=<span style="color: #97365b; font-weight: bold;">8</span>; l-=<span style="color: #97365b; font-weight: bold;">8</span><span style="color: #3b6ea8;">)</span>
    <span style="color: #29838d;">tick</span><span style="color: #3b6ea8;">(</span>N<span style="color: #3b6ea8;">)</span>;  <span style="color: #b1b1b1;">// </span><span style="color: #b1b1b1;">N est une constante</span>
<span style="color: #3b6ea8;">for</span><span style="color: #3b6ea8;">(</span> ; l&gt;<span style="color: #97365b; font-weight: bold;">0</span>; l--<span style="color: #3b6ea8;">)</span>
    tick<span style="color: #3b6ea8;">(</span><span style="color: #97365b; font-weight: bold;">1</span><span style="color: #3b6ea8;">)</span>
</pre>
</div>

<p>
C&rsquo;est un sch√©ma classique de traitement par bloc, qui a √©t√© retrouv√© par les
auteurs dans tout les chiffres par blocs impl√©ment√©s par <i>PGP</i>, dans les
manipulation de bits de <i>libtiff</i>, ou encore dans un encodeur <i>MPEG</i>. Le
raisonnement est le m√™me pour la machine et l&rsquo;humain avec d&rsquo;autres constantes
que 8 et 1. Il faut en fait sublimement √©quilibrer les potentiels entre les deux
boucles en fonction de la taille de <code>l</code> par rapport √† <code>N</code>. Le co√ªt exacte est
ici <b>(N/8)‚Äπ0,l‚Ä∫</b> quand <b>N‚â•8</b>, et <b>(7/8)(8-N) + (N/8)‚Äπ0,l‚Ä∫</b> quand <b>N&lt;8</b>. Notre
outil est le seul pouvant rendre compte des bornes pr√©cises pour toutes les
valeurs de <b>N</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-org02c13e6" class="outline-3">
<h3 id="org02c13e6">Potentiels lin√©aires</h3>
<div class="outline-text-3" id="text-org02c13e6">
<p>
Les fonctions de potentiel utilis√©es sont les combinaisons lin√©aires, √†
coefficients rationnels. Avant de proprement d√©finir <b>Œ¶</b> nous devons d√©finir les
indices et √©l√©ments de bases des combinaisons lin√©aires. On travaille √†
programme fixe, et on d√©finit:
</p>
<ul class="org-ul">
<li><b>L</b> l&rsquo;ensemble des variables locales √† un point du programme;</li>
<li><b>G</b> l&rsquo;ensemble les variables globales;</li>
<li><b>C</b> un ensemble fini de <i>symbole de constante</i>.</li>
</ul>
<p>
On suppose ces trois ensembles sont disjoints.
</p>

<p>
On d√©finit <i>l&rsquo;√©tat simplifi√© du programme</i> <b>œÉ : (G ‚à™ L ‚à™ C) ‚Üí ‚Ñ§</b> associant aux
variables et aux constantes leurs valeurs abstraites enti√®res. L&rsquo;ensemble des
indices des fonctions de potentiels est:
</p>
<blockquote>
<p>
<b>I = { (x,y) | x,y ‚àà (G ‚à™ L ‚à™ C) ‚àß x ‚â† y }</b>
</p>
</blockquote>

<p>
L&rsquo;ensemble des fonctions de potentiel de base associe donc √† une paire d&rsquo;entit√©
du programme le potentiel qu&rsquo;elle engendre. Ce potentiel d√©pend √©videmment de
l&rsquo;indice <b>i ‚àà I</b> consid√©r√© et de l&rsquo;√©tat courant <b>œÉ</b>. On d√©finit, pour <b>i = (x,y)</b>:
</p>
<blockquote>
<p>
<b>f<sub>i</sub>(œÉ) = ‚ÄπœÉ(x),œÉ(y)‚Ä∫ = max(œÉ(y)-œÉ(x), 0)</b> si <b>i ‚â† 0</b>
<b>f<sub>0</sub>(œÉ) = 1</b>
</p>
</blockquote>

<p>
On peut enfin d√©finir les fonctions de potentiels de notre analyse.
</p>
<blockquote>
<p>
<b>Œ¶ : ùïä ‚Üí ‚Ñ§</b> <br />
<b>Œ¶(œÉ) = q<sub>0</sub> + q<sub>(x,y)</sub>‚ÄπœÉ(x),œÉ(y)‚Ä∫ +  q<sub>(y,z)</sub>‚ÄπœÉ(y),œÉ(z)‚Ä∫ + ‚Ä¶</b> <br />
o√π les indices parcourent <b>I</b>
</p>
</blockquote>

<p>
On utilisera les formes courtes de ses fonctions: on inclut un symbole <b>0</b> de 0
dans <b>I</b>, que l&rsquo;on rend implicite:
Les fonctions de potentiel sont enti√®rement d√©finies par la famille <b>Q =
(q<sub>i</sub>)<sub>i‚ààI</sub></b> des coefficients. Comme <b>I</b> est fini (chaque programme l&rsquo;est),
<b>Q</b> est donc une <i>famille de rationnels positifs de support fini</i>, qui est une
construction finitiste !
</p>

<blockquote>
<p>
<b>Œ¶(œÉ) = ‚àë<sub>i</sub> q<sub>i</sub> f<sub>i</sub>(œÉ) = Q(œÉ)</b>
</p>
</blockquote>
</div>
</div>
</div>

<div id="outline-container-orgc56621b" class="outline-2">
<h2 id="orgc56621b">Syst√®me de type</h2>
<div class="outline-text-2" id="text-orgc56621b">
<p>
La s√©mantique de <i>Clight</i> est dot√© d&rsquo;une <i>m√©trique de ressource</i> <b>M</b> qui donne
le co√ªt dans <b>‚Ñö</b> de chaque √©tape de la s√©mantique op√©rationnelle. Dans nos
r√®gles, less sont limit√©es √† <b>x ‚Üê y</b> et <b>x ‚Üê x ¬± y</b>. Pour ce faire,
nous r√©-√©crivons le programme en explosant les affectations non-lin√©aires, en
prenant soin d&rsquo;adapter les <b>q<sub>i</sub></b> idoines pour conserver un co√ªt identique.
Ce pr√©-traitement est s√ªr et garantit <i>qu&rsquo;aucune borne de boucle de d√©pend
r√©sultats d&rsquo;op√©rations non-lin√©aires</i>.
</p>
</div>

<div id="outline-container-org8acbaec" class="outline-3">
<h3 id="org8acbaec">Jugements de typage</h3>
<div class="outline-text-3" id="text-org8acbaec">
<p>
On d√©finit les jugements de typages quantitatifs pour ce langage: ils sont bas√©s
sur ceux de la logique de Hoare: toutes les propositions sont s√©par√©es en une partie
logique <b>Œì</b> et une partie quantitative <b>Q</b>. Le jugement principal est:
</p>

<blockquote>
<p>
<b>(Œì<sub>B</sub>;Q<sub>B</sub>), (Œì<sub>R</sub>;Q<sub>R</sub>) ‚ä¢ {Œì;Q} S {Œì&rsquo;;Q&rsquo;}</b>
</p>

<p>
Pour un √©tat initial <b>œÉ</b>, si <b>Q(œÉ)</b> de potentiel est disponible et <b>Œì</b> vaut, on
peut ex√©cuter <b>S</b> sans d√©bordement en produisant un √©tat <b>œÉ&rsquo;</b>; il
reste au moins <b>Q&rsquo;(œÉ&rsquo;)</b> de potentiel et <b>Œì&rsquo;</b> vaut.
</p>
</blockquote>

<p>
Le jugement est en v√©rit√© un iota plus complexe, pour g√©rer les flux de
contr√¥les non-lin√©aires: comme en logique de Hoare, <b>(Œì<sub>B</sub>;Q<sub>B</sub>)</b> est la
post-condition qui tient si <b>S</b> sort d&rsquo;un boucle avec <code>break</code>, et <b>(Œì<sub>R</sub>;Q<sub>R</sub>)</b>
celle qui tient s&rsquo;il &laquo;&nbsp;<code>return</code>&nbsp;&raquo;.
</p>

<p>
Notre syst√®me de type collecte des informations sur les fonctions globales du
programme dans un contexte implicite <b>Œî</b>. Pour une fonction <code>f</code> d&rsquo;arguments
formels <code>Œ±</code> et de valeur retour <code>œÅ</code> pour l&rsquo;appelant, on a:
</p>

<blockquote>
<p>
<b>Œî(f) = Œªa.(Œì<sub>f</sub>;Q<sub>f</sub>), ŒªœÅ.(Œì<sub>f</sub>&rsquo;;Q<sub>f</sub>&rsquo;)</b>
</p>

<p>
En instanciant les param√®tres des informations de fonctions, on sait que dans un
√©tat <b>œÉ</b>, si <b>Q<sub>f</sub>(œÉ)</b> de potentiel est disponible et que <b>Œì<sub>f</sub></b> vaut, alors
l&rsquo;appel √† <b>f</b> s&rsquo;ex√©cute sans d√©bordement en produisant un √©tat <b>œÉ&rsquo;</b>; il reste au
moins <b>Q<sub>f</sub>&rsquo;(œÉ&rsquo;)</b> de potentiel et <b>Œì<sub>f</sub>&rsquo;</b> vaut.
</p>
</blockquote>
</div>
</div>


<div id="outline-container-orgf1b5e73" class="outline-3">
<h3 id="orgf1b5e73"><span class="todo TODO">TODO</span> Syst√®me de type</h3>
</div>
</div>



<div id="outline-container-orgc3e0541" class="outline-2">
<h2 id="orgc3e0541"><span class="todo TODO">TODO</span> Inf√©rence automatis√©e par programmation lin√©aire</h2>
</div>

<div id="outline-container-org23d647e" class="outline-2">
<h2 id="org23d647e"><span class="todo TODO">TODO</span> Contexte logique et interaction utilisateur</h2>
</div>

<div id="outline-container-orgf304d59" class="outline-2">
<h2 id="orgf304d59"><span class="todo TODO">TODO</span> Relation √† l&rsquo;√©tat de l&rsquo;art</h2>
</div>
</div>
</body>
</html>
